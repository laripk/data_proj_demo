<%= field_set_tag nil, :id => :query do %>
	<!-- %= render 'shared/error_messages', :object => @query % -->
	<%= field_set_tag nil, :id => :query_name, :class => 'field bigger' do %>
		<%= label_tag 'query[name]', 'Query Name' %>
		<%= text_field_tag 'query[name]', @query.name, :size => 50, :maxlength => @query.column_for_attribute(:name).limit %>
		<br />
	<% end %>
	<%= field_set_tag "Select Fields", :id => :choose_selected_fields, :class => 'field' do %>
		<%= label_tag 'query[selected_fields]', 'Select Fields' %>
		<div class='checkboxy'>
			<% check_group :query, :selected_fields, @field_info.map{|k,v| [k.to_s.humanize, k]}, :last, :first, @query.selected_fields %>
		</div>
		<p class='note'>something cogent about the date mapping between yearlies and deathrates</p>
		<p class='note'>Region descriptions contain a lot of accented characters. The character encoding is UTF-8.</p>
	<% end %>
<% end %>
<%= field_set_tag "Filters", :id => :filter do %>
	<!-- %= render(:layout => 'field_set_for', :locals => {:fieldname => :country_code}) do % -->
	<%= field_set_tag 'Filter on Country', :id => 'filter_country', :class => 'field' do %>
		<%= label_tag 'filter[country_code_in]', 'Country is one of:' %>
		<div class='checkboxy' style='height: 20em; overflow: auto'>
			<% check_group :filter, :country_code_in, VwcAllCombined.countries, :country_code, :country_description, @filter[:country_code_in]||={} %>
		</div>
		<br />
	<% end %>
	
	<%= field_set_tag 'Filter on Region', :id => 'filter_region', :class => 'field' do %>
		<%= label_tag 'filter[region_code_in]', 'Region is one of:' %>
		<div class='checkboxy' style='height: 20em; overflow: auto'>
			<% check_group :filter, :region_code_in, VwcAllCombined.regions, :region_code, :region_description, @filter[:region_code_in]||={} %>
		</div>
		<br />
	<% end %>
	
	<%= render 'numeric_field_set_for', :fieldname => :year %>

	<%= render 'numeric_field_set_for', :fieldname => :total_population %>

	<%= render 'numeric_field_set_for', :fieldname => :population_density %>

	<%= render 'numeric_field_set_for', :fieldname => :primary_income %>

	<%= render 'numeric_field_set_for', :fieldname => :start_year_death_rate %>

	<%= render(:layout => 'field_set_for', :locals => {:fieldname => :end_year_death_rate}) do %>
		<%= label_tag 'filter[end_year_death_rate_gte]', :end_year_death_rate_gte.to_s.humanize %>
		<%= text_field_tag 'filter[end_year_death_rate_gte]', @filter[:end_year_death_rate_gte] %>
		<br />
		<%= label_tag 'filter[end_year_death_rate_lte]', :end_year_death_rate_lte.to_s.humanize %>
		<%= text_field_tag 'filter[end_year_death_rate_lte]', @filter[:end_year_death_rate_lte] %>
		<br />
		<span class='note'>min/max</span>
	<% end %>
	<%= render(:layout => 'field_set_for', :locals => {:fieldname => :all_causes_death_rate}) do %>
		<%= label_tag 'filter[all_causes_death_rate_gte]', :all_causes_death_rate_gte.to_s.humanize %>
		<%= text_field_tag 'filter[all_causes_death_rate_gte]', @filter[:all_causes_death_rate_gte] %>
		<br />
		<%= label_tag 'filter[all_causes_death_rate_lte]', :all_causes_death_rate_lte.to_s.humanize %>
		<%= text_field_tag 'filter[all_causes_death_rate_lte]', @filter[:all_causes_death_rate_lte] %>
		<br />
		<span class='note'>min/max</span>
	<% end %>
	<%= render(:layout => 'field_set_for', :locals => {:fieldname => :cancer_death_rate}) do %>
		<%= label_tag 'filter[cancer_death_rate_gte]', :cancer_death_rate_gte.to_s.humanize %>
		<%= text_field_tag 'filter[cancer_death_rate_gte]', @filter[:cancer_death_rate_gte] %>
		<br />
		<%= label_tag 'filter[cancer_death_rate_lte]', :cancer_death_rate_lte.to_s.humanize %>
		<%= text_field_tag 'filter[cancer_death_rate_lte]', @filter[:cancer_death_rate_lte] %>
		<br />
		<span class='note'>min/max</span>
	<% end %>
	<%= render(:layout => 'field_set_for', :locals => {:fieldname => :heart_disease_death_rate}) do %>
		<%= label_tag 'filter[heart_disease_death_rate_gte]', :heart_disease_death_rate_gte.to_s.humanize %>
		<%= text_field_tag 'filter[heart_disease_death_rate_gte]', @filter[:heart_disease_death_rate_gte] %>
		<br />
		<%= label_tag 'filter[heart_disease_death_rate_lte]', :heart_disease_death_rate_lte.to_s.humanize %>
		<%= text_field_tag 'filter[heart_disease_death_rate_lte]', @filter[:heart_disease_death_rate_lte] %>
		<br />
		<span class='note'>min/max</span>
	<% end %>
	<%= render(:layout => 'field_set_for', :locals => {:fieldname => :all_accidents_death_rate}) do %>
		<%= label_tag 'filter[all_accidents_death_rate_gte]', :all_accidents_death_rate_gte.to_s.humanize %>
		<%= text_field_tag 'filter[all_accidents_death_rate_gte]', @filter[:all_accidents_death_rate_gte] %>
		<br />
		<%= label_tag 'filter[all_accidents_death_rate_lte]', :all_accidents_death_rate_lte.to_s.humanize %>
		<%= text_field_tag 'filter[all_accidents_death_rate_lte]', @filter[:all_accidents_death_rate_lte] %>
		<br />
		<span class='note'>min/max</span>
	<% end %>
	<%= render(:layout => 'field_set_for', :locals => {:fieldname => :transport_accidents_death_rate}) do %>
		<%= label_tag 'filter[transport_accidents_death_rate_gte]', :transport_accidents_death_rate_gte.to_s.humanize %>
		<%= text_field_tag 'filter[transport_accidents_death_rate_gte]', @filter[:transport_accidents_death_rate_gte] %>
		<br />
		<%= label_tag 'filter[transport_accidents_death_rate_lte]', :transport_accidents_death_rate_lte.to_s.humanize %>
		<%= text_field_tag 'filter[transport_accidents_death_rate_lte]', @filter[:transport_accidents_death_rate_lte] %>
		<br />
		<span class='note'>min/max</span>
	<% end %>
<% end %>

